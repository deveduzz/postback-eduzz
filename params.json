{
  "name": "Postback-eduzz",
  "tagline": "Receba postback com as informações de cada transação na Eduzz",
  "body": "# Postback Eduzz\r\n\r\n## Sobre o postback\r\nO recurso de postback permite que você receba notificações de alguns eventos que ocorrem dentro do sistema, possibilitando que alem do produtor, o afiliado tambem tenha um melhor controle sobre seu negócio.\r\n\r\nNo momento estão disponíveis apenas as ações referentes ao **rastreamento** de campanhas:\r\n* TRACKER.CHECKOUT - Acionado ao carregamento de um carrinho\r\n* TRACKER.THANKYOU - Acionado quando o cliente chega até a página de obrigado  \r\n* TRACKER.BOLETO   - Acionado sempre que um boleto é visualizado\r\n\r\nAs informações de alteração de status de compra estão disponíveis apenas para os produtores através do webhook. Muito em breve essas notificações estarão unificadas via postback tambem para os afiliados\r\n\r\n***\r\n## Cadastro de URL\r\n1. Logue em  sua conta e acesse o menu `Afiliado >> Meus Funis / Campanhas`\r\n2. Na listagem de suas campanhas, clique no ícone conforme indicado na imagem abaixo: ![alt tag](https://raw.githubusercontent.com/deveduzz/postback-eduzz/master/postback1.jpg)\r\n3. Na tela seguinte, cadastre a URL onde você deseja receber as notificações do sistema   ![alt tag](https://raw.githubusercontent.com/deveduzz/postback-eduzz/master/postback2.jpg)\r\n***\r\n\r\n## Requisições válidas e retentativas\r\nNo caso de falha, são realizados 5 tentativas no intervalo de 12 horas ( 2m,6m,24m,2h,12h), após esse periodo sem sucesso, a postback é cancelado.\r\nConsideramos válidas todas as requisicoes que retornam o status HTTP 200.\r\n***\r\n\r\n## Validação\r\nEnviamos via `header` o parametro `X-EduzzApi` , que deve ser comparada com a Chave de API do Afiliado/Produtor que receberá o postback.\r\n***\r\n\r\n## Parametros enviados\r\n\r\n\r\n| Parâmetro | Descrição |\r\n| --- | --- |\r\n| `event.action` | Ação de evento ( `TRACKER.CHECKOUT, TRACKER.BOLETO, TRACKER.THANKYOU` )\r\n| `event.datetime` | Data e hora do evento no formato YYYY-MM-DD HH:MM:SS ex: 2016-10-26 22:02:25\r\n| `invoice.id` | ID da fatura se houver.\r\n| `invoice.value` | Valor da fatura se houver\r\n| `invoice.status` | Status da fatura ( Ver [tabela de status de pagamento](#tabela-de-status-da-fatura) )\r\n| `invoice.paymentmethod` | Forma de pagamento ( Ver [tabela de formas de pagamento](#tabela-de-formas-de-pagamento) )\r\n| `invoice.datetime` | Data de criação da fatura ( Clicou em pagar ) no formato YYYY-MM-DD HH:MM:SS ex: 2016-10-26 22:02:25\r\n| `invoice.paymentdate` | Data de pagamento se houver no formato YYYY-MM-DD HH:MM:SS ex: 2016-10-26\r\n| `product.id` | Código do conteudo\r\n| `product.name` | Nome do conteudo\r\n| `customer.id` | ID do cliente se houver\r\n| `customer.name` | Nome do cliente se houver\r\n| `customer.email` | Email do cliente se houver\r\n| `partner.id` | ID do afiliado se houver\r\n| `partner.name` | Nome do afiliado se houver\r\n| `partner.email` | E-mail do afiliado se houver\r\n| `tracker.funnelkey` | Código da campanha se houver\r\n| `tracker.utm_source` | Referencia informada na momento do clique (Ex: http://edz.la/XXXX?a=815959&utm_source=BANNER01)\r\n| `tracker.utm_content` | Referencia informada no momento do clique (Ex: http://edz.la/XXXX?a=815959&utm_content=BANNER02)\r\n| `tracker.utm_campaign` | Referencia informada no momento do clique (Ex: http://edz.la/XXXX?a=815959&utm_campaign=BANNER03)\r\n| `tracker.utm_medium` | Referencia informada no momento do clique (Ex: http://edz.la/XXXX?a=815959&utm_medium=BANNER01)\r\n| `tracker.ip` | IP de origem da transação\r\n| `cart.key` | Código da pagina de checkout\r\n| `cart.datetime` | Data de primeira abertura do checkout no formato YYYY-MM-DD HH:MM:SS ex: 2016-10-26 22:02:25\r\n\r\n### Tabela de status da fatura\r\n\r\nID  | Status | Descrição\r\n--- | ------ | -----------\r\n`1` | Aberto | Fatura foi gerada ( Clicou em pagar e não foi autorizado, ou apenas gerou um boleto ) \r\n`3` | Paga | Compra foi paga, o cliente já esta apto a receber o produto \r\n`4` | Cancelada | Fatura Cancelada pela Eduzz\r\n`6` | Aguardando Reembolso | Cliente solicitou reembolso, porem o mesmo ainda não foi efetuado\r\n`7` | Reembolsado | Cliente já foi reembolsado pela eduzz\r\n`8` | Em Análise | Cliente efetuou o pagamento, porém esta em análise pela instituição financeira\r\n`11` | Em Recuperacao | Fatura entrou para o processo de recuperação\r\n\r\n### Tabela de formas de pagamento\r\nID\t| Forma de pagamento\r\n----\t| -----\r\n`1` \t| Boleto Bancário\r\n`9` \t| Paypal\r\n`13` \t| Visa\r\n`15` \t| Mastercard\r\n`16` \t| Diners\r\n`17` \t| Débito Banco do Brasil\r\n`18` \t| Débito Bradesco\r\n`19` \t| Débito Itaú\r\n`21` \t| Hipercard\r\n`22` \t| Débito Banrisul\r\n`23` \t| Hiper\r\n`24` \t| Elo\r\n`25` \t| Paypal Internacional\r\n***\r\n\r\n# Exemplos\r\n### RAW BODY\r\n `cart.datetime=2016-10-26+23%3A11%3A14&cart.key=000000-WJWUPJ-ZFZVIP-GBN9Y7&event.action=TRACKER.CHECKOUT&event.datetime=2016-10-26+23%3A12%3A01&request.datetime=2016-10-26+23%3A12%3A42&request.id=EDZ45PB&request.queue=b12962c493c3cafe6db4039515a6c0c7&request.tries=1&request.type=TRACKER.CHECKOUT&tracker.funnelkey=KKAAM&tracker.ip=177.43.204.90&tracker.utm_campaign=TESTE_TRACKER2&tracker.utm_content=&tracker.utm_medium=TESTE_TRACKER2&tracker.utm_source=TESTE_TRACKER`\r\n\r\n### Suporte\r\nEncontrou algum problema? Entre em contato com nosso [suporte](mailto://suporte@eduzz.com) e nós ficaremos felizes em ajuda-lo.\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}